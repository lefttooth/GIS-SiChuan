# 1.开发目的

艰苦卓绝的三年新冠疫情抗争接近尾声，2023年随着疫情防控政策逐渐放开，在政府出台的一系列支持或惠及旅游企业的政策措施下，旅游业努力克服多重因素影响，统筹做好疫情防控和恢复发展。四川省有着得天独厚的自然资源、璀璨夺目的文化瑰宝、五彩斑斓的民俗生活，有着"天府之国"美誉的四川省一直以来作为旅游强省吸引八方游客。

旅游业传统的发展模式是"圈山圈水收门票,人山人海吃红利"的流量思维,但在全域旅游战略下,特别是预约、限流新常态下,大客流模式存在全域化、分散化、线上化迁移的可能。旅游业的开放式发展,已在"旅游+"和"+旅游"的融合发展上持续加深,基于文化和旅游融合逐步进入深水区，在线经济和文化融合成为行业进一步创新发展的动力。而旅游行业与地理空间关系紧密，基于GIS系统，使得用户可以根据关键信息进行智能匹配，快速查询目标兴趣区，提高了旅游信息获取的效率。

四川位于民族东西交融、南北过渡的走廊，糅合吸收民族之长，聚居藏、羌、纳西等55个少数民族，拥有独特的地域文化和绚丽的民族风情，丰富的红色文化与古蜀文明交相辉映，相得益彰。但是，目前四川旅游存在住宿选取、景点选取困难的痛点，高海拔地区住宿区距离远，无法准确定位住宿点，大部分景点知名度不高，存在信息查询困难，位置准确度不高等问题；极端天气突发，可视化程度低四川地处碰撞板块，地质灾害频发，加上高原极端天气，危险性高；在线交流困难在出行和计划时期，不能时刻了解景点客流量、住宿、天气情况等信息，同时高海拔信号差，不能准确获取信息判断是否满足出行需求；路线规划复杂山区地势复杂，存在交通拥堵和道路不明等情况，导致不能快速定位景点和住宿位置。

因此，开发一款解决上诉痛点和需求的系统即四川省旅游WebGIS系统，能够提升游客的旅游体验和满意度。通过该系统，游客可以轻松获取准确的住宿和景点信息，了解目标地区的天气和地质情况，实时获取景点客流量和天气情况等信息，规划最佳的旅行路线，并与其他游客和旅游机构进行在线交流和信息分享。

该系统的目标是打破传统旅游发展模式的局限性，适应全域旅游战略和新常态下的需求变化。通过结合文化和旅游的融合发展，以及在线经济的发展，该系统将为四川旅游业带来创新发展的动力。

系统的开发旨在提供用户友好的界面和交互方式，确保用户可以轻松地浏览和查询旅游信息，进行智能匹配和快速定位目标兴趣区。同时，系统将充分考虑四川地区的特点和复杂性，提供可视化的天气和地质信息，解决高海拔地区的住宿和景点选取困难。此外，系统还将整合各类旅游资讯和实用工具，帮助游客获取全面的旅游信息，应对路线规划复杂、在线交流困难等问题。

综上所述，四川省旅游WebGIS系统的开发旨在为游客提供便捷、准确的旅游信息服务，访问便捷，操作简单。可以提供基于四川省景区信息的统计和大数据可视化服务，展示四川省A级景区的分布情况；提供空间查询服务，精确查询并实时展示目标区域内景区和旅行社信息；可以提供空间分析能力，提供最佳自驾路径分析和多景区旅游自驾路径规划服务，操作简单，精准查询并展示目的地A级旅游景区位置和添加多个旅游景区，并可以分析并展示从地图任意地点到目的景区的最佳自驾路径，规划多目的景区旅游最佳自驾路径。满足他们的住宿、景点选择、天气和地质情况查询、路线规划等需求，促进四川旅游业的恢复和发展。

# 2.开发流程

## 2.1 数据处理

搜集四川省旅游景点、居民点和旅行社信息，将地图要素导入，通过地理编码获取坐标，统一坐标系。在桌面端SuperMap
iDesktop构建工作空间，处理表格数据，展点展示各地理数据，搭建网络数据集。

![](./images/media/image1.png){width="2.15625in"
height="2.9611111111111112in"}

图1 网络数据集

通过对各地理要素整饰符号，修改配色和风格，得到以下地图。

![](./images/media/image2.png){width="5.1in"
height="3.457638888888889in"}

图2 处理后地图

## 2.2 服务发布

将工作空间上传至SuperMap
iServer服务器中，依据配置依次发布REST地图服务、数据服务和网络数据集服务，其中地图服务返回四川省地图，数据服务将工作空间各数据进行发布，供前端查询和编辑；网络数据集服务提供交通网络分析服务。

![](./images/media/image3.png){width="5.761805555555555in"
height="1.7881944444444444in"}

图3 服务发布

## 2.3 编程调用

利用SuperMap
iClient构建前端服务查询算法，通过请求iServer发布的数据服务，将符合条件的地理要素展示在地图上。

![](./images/media/image4.png){width="3.8381944444444445in"
height="2.8680555555555554in"}

图4 查询结果

## 2.4 后台管理

通过SpringBoot搭建后端框架，以JWT做为权限管理工具，用户无token无法进入地图主页。使用MaBatis
PLUS最终搭建实体层、服务层和数据层的三层稳定架构，低耦合，高内聚，便于后续接口的维护和新增，可维护性强。

![](./images/media/image5.png){width="1.9555555555555555in"
height="4.113194444444445in"}

图5 后台架构

# 3.技术手段

## 3.1 总体技术路线

本系统使用全系列超图软件，以Vue+SpringBoot构建系统前后端分离框架。

GIS方向首先使用桌面端SuperMap iDesktop处理数据，并利用SuperMap
iServer进行地图信息的服务发布，最后由前端SuperMap iClient调用地图服务。

业务方向使用MySQL和SQL
Server作为数据库，实现数据的持久化；使用SpringBoot和MyBatis
PLUS搭建系统后端接口；前端使用Vue+axios进行前后端数据交互，利用Three.js搭建全景地图；利用Git进行开发协作，并利用Gitee作为代码仓库。

![](./images/media/image6.png){width="4.667361111111111in"
height="3.0520833333333335in"}

图6 技术路线

## 3.2 前端技术

前端采用Vue+ELement-UI作为框架和样式库，利用Axios完成前后端数据交互。地图方面采用了SuperMap
iClient for Leaflet，SuperMap iClient for Mapbox和天地图组件。

## 3.3 后端技术

后端采用SpringBoot作为框架，耦合了MyBatits
PLUS、HuTools、JWT等工具搭建了集成用户注册登录、权限验证、修改密码、更改头像、用户管理等接口。JWT负责权限验证，如果角色为用户则无权管理他人信息；如果访问不存在的页面会出现404页面拦截。

## 3.4 地图服务

使用SuperMap
iServer作为GIS服务器，发布了地图服务、数据服务和网络数据集服务。

## 3.4 数据库

使用MySQL作为业务数据库。

# 4.创新特色

## 4.1 自发布式服务

使用自发布式服务，没有API访问数量限制。

## 4.2 数据大屏

使用数据可视化一览大屏向用户展示四川省各个地区的旅游热点、流量趋势、景点旅行社分布及路线规划。

## 4.3 严密的权限系统

严密的权限系统，用户访问无权限网址和不存在网址时，会被拦截转向安全网址。用户无token无法进入地图主页。

## 4.4 接口高内聚，低耦合

系统接口低内聚高耦合，便于新增和修改，可维护性好。

# 5.功能

## 5.1 系统架构图

四川省旅游资源服务系统基于SOA架构，采用B/S结构进行开发和设计。本系统框架主要分为基础设施层、数据资源层、服务层、应用综合层以及用户层。本系统框架设计示意图如图所示。

系统框架设计说明：

1.  基础设施层主要包括系统运行的软硬件设施，如服务器、存储设备、GIS平台等；

2.  数据资源层为系统应用提供基础地理信息数据和各类旅游信息资源数据，如旅游景点数据、旅游路线、餐饮住宿等；

3.  服务层是按照一定的标准，以服务的方式进行聚合，从而提高系统开发效率，常用的服务有地图服务、查询服务、定位服务等；

4.  应用综合层是用户能够应用的功能，主要包括旅游地理信息浏览、GIS基本操作、景区街景展示、以及景区自驾路线等；

5.  用户层是系统使用人员，主要包括系统管理员、游客等。

![](./images/media/image7.png){width="4.0375in"
height="3.307638888888889in"}

图 7 系统框架设计

## 5.2 功能划分

基于WebGIS的四川省旅游资源服务系统的结构与功能从总体结构和功能分配方面统一考虑,系统的数据库及软件模块将可以在其它子系统中进行重用，以减少今后系统开发和维护的工作量。

按照功能构成，软件系统可分为七个主要部分：用户管理功能、地图浏览功能、地图可视化功能、地图查询功能、地图分析功能、景区评价功能和拓展功能。其功能结构图如图8所示。

![图 8
系统功能架构图](./images/media/image8.png){width="5.768055555555556in"
height="3.720138888888889in"}

具体功能如下：

1.  用户管理功能：用户注册模块、用户登录模块、用户信息修改模块。

2.  地图浏览功能：底图切换模块、浏览操作模块。

3.  地图可视化功能：专题符号模块、Echarts图表模块、热力图模块。

4.  地图查询功能：景点查询模块、旅行社查询模块、缓冲区住宿查询模块。

5.  地图分析功能：最佳自驾路径分析模块、多景区旅游自驾路径分析模块。

6.  景区评价功能：查看和发布评价模块、管理评价模块。

7.  拓展功能：天气功能模块、基于协同过滤算法的景点推荐模块、地质灾害预警模块、VR场景模块。

### 5.2.1 用户管理功能

1.  用户可以注册、登录、修改个人信息；

2.  管理员可以添加、修改、删除用户的信息。

> ![](./images/media/image9.png){width="2.7291666666666665in"
> height="4.271527777777778in"}
>
> 图9 新建用户

### 5.2.2 地图浏览功能

1.  使用天地图为系统底图,可切换天地图图层类型,实现地图的图层类型切换;

2.  实现地图的基本浏览操作,包括放大、缩小、平移，并在系统加载时，默认显示为四川省的可视范围。

> ![](./images/media/image10.png){width="5.3493055555555555in"
> height="3.04375in"}
>
> 图10 地图浏览

### 5.2.3 地图可视化功能

1.  对地图符号系统进行分专题设计，对地图中展示四川省A级景区的分布情况;

2.  使用ECharts的丰富图表,在地图中清晰表达四川省各市的5A、4A、3A级旅游景点数量。

3.  提供旅游信息旅游热力图，实现旅游和住宿的大屏可视化。\
    ![](./images/media/image11.png){width="5.614583333333333in"
    height="2.7909722222222224in"}

> 图11 数据大屏

### 5.2.4 地图查询功能

1.  在搜索框内输入旅游景区名称，定位该景点位置，点击景区位置展示该旅游景区的属性信息；

2.  在地图上点击市级行政区划，展示该市内的旅行社信息；

> ![](./images/media/image12.png){width="5.106944444444444in"
> height="2.5236111111111112in"}
>
> 图12 市级旅行社查询结果

### 5.2.5 地图分析功能

1.  最佳自驾路径：要求可以查询并展示目的地A级旅游景区位置，并可以分析并展示从地图任意地点到目的景区的最佳自驾路径；

最佳路径分析，是求解网络中两点之间阻抗最小的路径，必须按照节点的选择顺序访问网络中的结点。"阻抗最小"有多种理解，如基于单因素考虑的时间最短、费用最低、风景最好、路况最佳、过桥最少、收费站最少、经过乡村最多等。本项目的最佳自驾路径主要考虑时间最短的路径求解，示例图如图所示。

![图 13
最佳自驾路径](./images/media/image13.jpeg){width="4.675694444444445in"
height="2.1993055555555556in"}

2.  多景区旅游自驾路径规划：查询并添加多个旅游景区，规划多目的景区旅游最佳自驾路径。

多景区旅游自驾路径规划实际上可以归为时间最短情况下，按照结点的选择顺序访问网络中的结点所求求解出的网络中两点之间阻抗最小的路径，示例图如图所示。

![图 14
多景区旅游自驾路径规划](./images/media/image14.jpeg){width="5.488194444444445in"
height="2.571527777777778in"}

### 5.2.6 景区评价功能

1.  用户可以查看和发布景区的评论信息,包括注意事项、景区评价等信息；

2.  管理员对不合理的评论信息进行管理，维护正常秩序。

### 5.2.7 拓展功能

1.  **天气功能**

四川省地处中国西南地区，气候多样，天气变化较为频繁，因此在旅游系统中引入一个天气模块是非常有必要的。该模块可以为游客提供准确的天气信息，帮助他们做出合理的行程安排和准备，提升旅游体验和安全性。

和风天气开发服务基于先进的气象和人工智能算法，为广大开发者和企业提供了丰富、精准的天气数据服务，帮助你在应用中展示天气，或助力你的业务决策。这一切都可以通过和风天气提供的开发工具，轻松的集成。天气模块可以集成天气警报和提示功能，当出现恶劣天气条件（如暴雨、雷电、大风等）时，系统可以向用户发送警报或提示信息，提醒他们采取相应的安全措施，确保旅游活动的安全。该模块应允许用户选择具体的地区或景点，以获取该地区的天气信息。天气模块提供天气预报功能，包括未来几天的天气状况、气温、降水概率、风力等信息。这样游客可以提前知道目的地的天气情况，为行程安排和装备选择做出合理的决策，天气效果如图所示。

![](./images/media/image15.png){width="1.9479166666666667in"
height="0.625in"}

![图 15
天气功能](./images/media/image16.jpeg){width="5.759722222222222in"
height="2.7291666666666665in"}

2.  **地质灾害预警**

四川地处地震多发区和复杂地质环境的地区，地质灾害是该地区旅游系统面临的重要风险之一。为了提高旅游系统的安全性和可持续发展，建立一个地质灾害预警模块是非常重要的，四川省历史地震示例图如图所示，来自SuperMap
Online。

![图 16
四川省历史地震示例图](./images/media/image17.jpeg){width="5.759722222222222in"
height="2.6777777777777776in"}

3.  **VR场景**

四川省旅游系统中引入VR全景地图模块可以为游客提供沉浸式的旅游体验，使其能够在虚拟环境中亲身感受目的地的美景和文化特色。VR全景地图模块应包括四川省部分旅游目的地的地理覆盖，并展示主要景点的全景照片或视频。这样的模块可以为游客提供更直观、真实的感受，让他们在虚拟环境中仿佛置身于目的地之中，为接下来的旅行做足准备，示例图如图所示：

![图 17
VR全景地图展示](./images/media/image18.jpeg){width="5.759722222222222in"
height="2.6881944444444446in"}

## 5.3 功能描述与分析

### 5.3.1 用例图

用例图（Use Case
Diagram）是用户与系统交互的最简表示形式，展现了用户和与他相关的用例之间的关系。通过用例图，人们可以获知系统不同种类的用户和用例。用例图下面将和数据流图配合使用，用例图如图所示。

![](./images/media/image19.png){width="4.045833333333333in"
height="5.147916666666666in"}

图 18 用例图

系统包括一般用户（游客）和管理员2个角色，用户管理、地图浏览、地图可视化、景区信息、路径分析、景区评论和拓展功能7个子系统，注册、登录、修改用户信息等23个用例。与管理员关联的用例有管理用户信息、发布地图、更新景区信息、管理评论和发布地质灾害预警信息5个用例，与用户关联的用例有注册、登录、修改用户信息等18个用例。

### 5.3.2 数据流图

数据流图（Data Flow
Diagram）：简称DFD，它从数据传递和加工角度，以图形方式来表达系统的逻辑功能、数据在系统内部的逻辑流向和逻辑变换过程，是结构化系统分析方法的主要表达工具及用于表示软件模型的一种图示方法。数据在系统中流动和处理的过程。下面，我们使用分层的数据流图来详细表述数据在系统中流动和处理的过程。

**顶层数据流图**

用户群体由一般用户和管理员用户组成。不同用户群体使用系统目标不同故相应功能使用权限不同。其中，一般用户可进行用户信息的更新、对地图进行浏览、查询和分析处理以及可视化、景区评价以及一系列拓展功能的操作，管理员用户则是主要进行对用户信息的维护，如图所示。

![](./images/media/image20.png){width="5.767361111111111in"
height="4.29375in"}

图 19 顶层数据流图

**第一层数据流图**

整个系统可分为七个子系统：用户管理子系统、地图浏览子系统、可视化子系统、地图查询子系统、地图分析子系统、景区评价子系统和拓展功能子系统。用户管理子系统由管理员用户和一般用户共同使用，但权限不同，管理员用户再登录后可以对所有用户及其操作的信息进行维护和修改，而一般用户在登录后只能修改自己的身份信息而没有查看其他用户身份信息的权限。地图浏览子系统、可视化子系统、地图查询子系统、地图分析子系统、景区评价子系统和拓展功能子系统面向一般用户，地图浏览子系统为一般用户提供地图的基本浏览操作,包括放大、缩小、平移等功能；可视化子系统主要执行数据的区域汇总分析以及图表大屏等数据可视化功能；地图查询可视化子系统主要包括属性查询和空间查询两部分；地图分析子系统主要包括最佳自驾路径规划、多景区旅游自驾路径规划以及查找最近居民点功能。景区评价子系统可以使用户可以查看和发布景区的评论信息；拓展功能子系统主要包括天气查看，基于协同过滤算法的景点推荐、地质灾害预警和VR场景功能，如图所示。

![](./images/media/image21.png){width="5.763194444444444in"
height="5.031944444444444in"}

图 20 第一层数据流图

**第二层数据流图**

当一般用户发出操作请求，需要输入用户ID和密码进行身份验证。验证通过后，就可以进入地图浏览子系统，否则系统将显示身份验证失败，要求用户重新输入验证信息。进入系统后，按自身所需选择底图切换或浏览操作，默认使用天地图为系统底图,可切换天地图图层类型,实现地图的图层类型切换，并在系统加载时，默认显示为四川省的可视范围，以进行下一步的操作，进行和数据库的交互，并将结果反馈给用户，如图所示。

![](./images/media/image22.png){width="5.240277777777778in"
height="3.1597222222222223in"}

图 21 地图浏览子系统

当一般用户发出操作请求，需要输入用户ID和密码进行身份验证。验证通过后，就可以进入可视化子系统，否则系统将显示身份验证失败，要求用户重新输入验证信息。进入系统后，按自身所需选择专题符号展示或图表大屏展示，将专题符号加载到地图中可以直观地展示四川省A级景区的分布情况，此外使用ECharts的丰富图表，并从数据库中读取数据，可以清晰表达四川省各市的5A、4A、3A级旅游景点数量。提供旅游信息热点词云及旅游热力图，经处理后输出给用户，如图所示。

![](./images/media/image23.png){width="5.027083333333334in"
height="3.040277777777778in"}

图 22 可视化子系统

当一般用户发出操作请求，需要输入用户ID和密码进行身份验证。验证通过后，就可以进入地图查询子系统，否则系统将显示身份验证失败，要求用户重新输入验证信息。进入系统后，根据数据库中所存放的数据，按自身所需选择属性查询或空间查询，如图23所示。

![](./images/media/image24.png){width="5.522916666666666in"
height="2.6194444444444445in"}

图 23 地图查询子系统

当一般用户发出操作请求，需要输入用户ID和密码进行身份验证。验证通过后，就可以进入地图分析子系统，否则系统将显示身份验证失败，要求用户重新输入验证信息。进入系统后，按自身所需单景区最佳自驾路径、多景区路径规划和居民点空间分析。单景区路线规划可以展示目的地A级旅游景区位置，并可以计算和展示从地图任意地点到目的景区的最佳自驾路径；多景区旅游自驾路径规划可以添加多个旅游景区，规划多目的景区旅游最佳自驾路径；居民点空间分析可以准确查询到现实情况中花费时间最短到达的居民点，而且一旦遇到应急情况，需要规划逃生路线时，查找最近设施能够为游客争取宝贵的时间，如图所示。

![](./images/media/image25.png){width="5.764583333333333in"
height="2.9444444444444446in"}

图 24 地图分析子系统

当一般用户发出操作请求，需要输入用户ID和密码进行身份验证。验证通过后，就可以进入景区评价子系统，否则系统将显示身份验证失败，要求用户重新输入验证信息。进入系统后，按自身所需进行景区评价发布或景区评价查看，如图所示。

![](./images/media/image26.png){width="5.763888888888889in"
height="3.4631944444444445in"}

图 25 景区评价子系统

**第三层数据流图**

用户在决定查看大屏时，图表可视化系统将从数据库中请求相关数据，对数据进行加工进行可视化展现，并按照一定的布局方式制作大屏，清晰表达四川省旅游景点的相关信息，如图所示。

![](./images/media/image27.png){width="5.7625in"
height="3.0618055555555554in"}

图 26 大屏制作

用户选择进行空间查询后，可根据需求在地图上点击市级行政区划，展示该市内的旅行社信息；也可以对景区进行缓冲区分析，查询出附近的居民点信息，供旅客选择住宿地点，如图所示。

![](./images/media/image28.png){width="5.7625in"
height="3.1979166666666665in"}

图 27 空间查询

# 6.典型界面

## 6.1 系统旅游宣传页

![](./images/media/image29.png){width="5.75in" height="2.85in"}

图28 系统宣传页

## 6.2 系统注册与登录

![](./images/media/image30.png){width="5.8805555555555555in"
height="3.44375in"}

图29 系统登录页

## 6.3 地图应用界面

![](./images/media/image31.png){width="5.9840277777777775in"
height="3.41875in"}

图30 地图应用界面

## 6.4 数据一览

![](./images/media/image32.png){width="6.3694444444444445in"
height="3.1638888888888888in"}

图31 数据大屏

## 6.5 后台管理

![](./images/media/image33.png){width="6.408333333333333in"
height="3.654861111111111in"}

图32 后台管理
